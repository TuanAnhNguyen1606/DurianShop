<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>DuRi ĂnĂn</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700,800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Lora:400,400i,700,700i&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Amatic+SC:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/open-iconic-bootstrap.min.css}">
    <link rel="stylesheet" th:href="@{/css/animate.css}">
    <link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}">
    <link rel="stylesheet" th:href="@{/css/owl.theme.default.min.css}">
    <link rel="stylesheet" th:href="@{/css/magnific-popup.css}">
    <link rel="stylesheet" th:href="@{/css/aos.css}">
    <link rel="stylesheet" th:href="@{/css/ionicons.min.css}">
    <link rel="stylesheet" th:href="@{/css/bootstrap-datepicker.css}">
    <link rel="stylesheet" th:href="@{/css/jquery.timepicker.css}">
    <link rel="stylesheet" th:href="@{/css/flaticon.css}">
    <link rel="stylesheet" th:href="@{/css/icomoon.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div th:replace="fragments/header :: header"></div>
<div class="container py-5">
    <h2 class="mb-4">Chi tiết đơn hàng</h2>
    <div class="order-summary">
        <h5>Mã đơn hàng: <span>#1001</span></h5>
        <h5>Ngày đặt: <span>01/09/2023</span></h5>
        <h5>Tình trạng: <span>Đang xử lý</span></h5>
        <h5>Tổng tiền: <span>1,000,000 VNĐ</span></h5>
    </div>

    <h4 class="mt-4">Danh sách sản phẩm trong đơn hàng</h4>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>Tên sản phẩm</th>
            <th>Giá</th>
            <th>Số lượng</th>
            <th>Tổng</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>Sầu riêng Monthong</td>
            <td>500,000 VNĐ</td>
            <td>2</td>
            <td>1,000,000 VNĐ</td>
        </tr>
        <tr>
            <td>Sầu riêng Ri6</td>
            <td>300,000 VNĐ</td>
            <td>1</td>
            <td>300,000 VNĐ</td>
        </tr>
        <tr>
            <td>Sầu riêng Musang King</td>
            <td>600,000 VNĐ</td>
            <td>1</td>
            <td>600,000 VNĐ</td>
        </tr>
        </tbody>
    </table>

    <div class="order-actions mt-4">
        <a href="/Account/MyOrder" class="btn btn-secondary">Quay lại danh sách đơn hàng</a>
        <button class="btn btn-danger" data-toggle="modal" data-target="#cancelOrderModal">Hủy đơn hàng</button>
    </div>
</div>
<div class="modal fade" id="cancelOrderModal" tabindex="-1" role="dialog" aria-labelledby="cancelOrderModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="cancelOrderModalLabel">Lý do hủy đơn hàng</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <textarea id="cancelReason" class="form-control" rows="4" placeholder="Nhập lý do hủy đơn hàng..."></textarea>
                <div id="error-message" class="text-danger mt-2" style="display: none;">Vui lòng nhập lý do hủy đơn hàng.</div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Đóng</button>
                <button type="button" class="btn btn-danger" onclick="confirmCancelOrder()">Hủy đơn hàng</button>
            </div>

        </div>
    </div>
</div>

<div th:replace="fragments/footer :: footer"></div>
<!-- loader -->
<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>
<script src="/js/jquery.min.js"></script>
<script src="/js/jquery-migrate-3.0.1.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/jquery.easing.1.3.js"></script>
<script src="/js/jquery.waypoints.min.js"></script>
<script src="/js/jquery.stellar.min.js"></script>
<script src="/js/owl.carousel.min.js"></script>
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/aos.js"></script>
<script src="/js/jquery.animateNumber.min.js"></script>
<script src="/js/bootstrap-datepicker.js"></script>
<script src="/js/scrollax.min.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBVWaKrjvy3MaE7SQ74_uJiULgl1JY0H2s&sensor=false"></script>
<script src="/js/google-map.js"></script>
<script src="/js/main.js"></script>
</body>
<script>
    function confirmCancelOrder() {
        const reason = document.getElementById('cancelReason').value;
        const errorMessage = document.getElementById('error-message');
        if (reason.trim() === "") {
            errorMessage.style.display = "block";
            return;
        } else {
            errorMessage.style.display = "none";
        }
        const orderId = 1001;
        const cancelUrl = `/Order/Cancel/${orderId}?reason=${encodeURIComponent(reason)}`;
        window.location.href = cancelUrl;
    }
</script>
</html>
